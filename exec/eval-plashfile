#!/usr/bin/env python3
# usage: plash eval-file [ FILE ]

import sys
import os

try:
    file = open(sys.argv[1])
except IndexError:
    file = sys.stdin

tokens = []
fstline = True
for line in file.readlines():
    if fstline and line.startswith('#!'):
        continue
    line = line.strip('\n')
    if line.startswith('-') and ' ' in line:
        tokens.extend(line.split(' '))
    else:
        tokens.append(line)
    fstline = False

os.execlp("plash", "plash", "eval", *tokens)
