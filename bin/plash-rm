#!/usr/bin/env python3
#
# usage: plash-rm [CONTAINER1 [CONTAINER2 [CONTAINER3 ...]]]
# Deletes the given containers.

from subprocess import check_output, CalledProcessError
import os
import sys
from shutil import rmtree
from tempfile import mkdtemp
from plashlib.utils import handle_help_flag, catch_and_die, nodepath_or_die, handle_build_args

handle_help_flag()
handle_build_args()

PLASH_DATA = os.environ.get('PLASH_DATA', '/var/lib/plash')

for container in sys.argv[1:]:
    node = nodepath_or_die(container)
    tmp = mkdtemp(dir=PLASH_DATA)
    os.rename(node, tmp)
    rmtree(tmp)
