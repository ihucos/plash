#!/usr/bin/env python3
#
# usage: plash-export-squashfs CONTAINER FILE
# Export a container as squashfs

from plashlib.utils import handle_help_flag, die_with_usage, handle_build_args
import os
import sys

handle_help_flag()
handle_build_args()

try:
    container, out = sys.argv[1:3]
except IndexError:
    die_with_usage()

os.execlp(
     'plash-with-mount',
     'plash-with-mount',
     container,
     'mksquashfs',
     '.',
     out)
