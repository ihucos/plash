#!/bin/sh

# usage: plash SUBCOMMAND <ARGS>
# Try `plash help -l` for a list of all commands.
# Plash is a lean container build system.

set -eu

if [ "$*" = --help ]; then
  exec plash.help $0
elif [ $# -eq 0 ]; then
  plash.help --usage $0
  exit 2
fi

cmd=$1
shift
case $cmd in
-*)
    # "do run" is used as default command, when no other was given
    exec $0.do run "$cmd" "$@" ;;

*)
    command -v $0.$cmd >/dev/null 2>&1 || {
        echo >&2 "Subcommand '$cmd' not found, try --help"
        exit 1
    }
    exec $0.$cmd "$@" ;;

esac
